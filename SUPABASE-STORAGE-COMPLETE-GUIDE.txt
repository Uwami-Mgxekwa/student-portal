================================================================================
SUPABASE STORAGE INTEGRATION - COMPLETE IMPLEMENTATION GUIDE
================================================================================
Gauteng City College Student Portal
Developer: Uwami Mgxekwa
GitHub: https://github.com/Uwami-Mgxekwa
Date: February 2025

================================================================================
WHAT WAS IMPLEMENTED
================================================================================

This implementation enables CLOUD-BASED file storage using Supabase Storage.
Files are now uploaded directly to Supabase and can be accessed by anyone
without needing GitHub access or manual file management.

KEY FEATURES:
✅ Admin uploads PDF files through web interface
✅ Files stored in Supabase Storage (cloud)
✅ Students automatically see files based on their year
✅ No manual file placement needed
✅ Download tracking
✅ Easy file deletion
✅ Year-specific content filtering (Year 1, 2, 3, or All)

================================================================================
SYSTEM REQUIREMENTS
================================================================================

FOR ADMIN SYSTEM:
1. Supabase account (free tier works)
2. Web browser (Chrome, Firefox, Edge, Safari)
3. Internet connection
4. Login credentials for student portal

FOR STUDENT SYSTEM:
1. Web browser
2. Internet connection
3. Student account (signup through portal)

NO TECHNICAL KNOWLEDGE REQUIRED:
- No GitHub knowledge needed
- No command line needed
- No file server management needed
- No FTP needed

================================================================================
SETUP INSTRUCTIONS (ONE-TIME ONLY)
================================================================================

STEP 1: CREATE SUPABASE STORAGE BUCKET
---------------------------------------
1. Go to your Supabase project dashboard
2. Click "Storage" in the left sidebar
3. Click "Create a new bucket"
4. Enter bucket name: resources
5. Set "Public bucket": YES (important!)
6. Click "Create bucket"

STEP 2: RUN DATABASE SETUP SQL
-------------------------------
1. In Supabase dashboard, click "SQL Editor"
2. Click "New Query"
3. Open the file: supabase-storage-setup.sql
4. Copy ALL the SQL code
5. Paste into Supabase SQL Editor
6. Click "Run" button
7. Wait for "Success" message

This creates:
- resources table (stores file information)
- Storage policies (controls access)
- Download tracking
- Year-based filtering

STEP 3: VERIFY SETUP
--------------------
1. Go to Storage > resources bucket
2. You should see an empty bucket
3. Go to Table Editor > resources table
4. You should see an empty table with columns

THAT'S IT! Setup is complete.

================================================================================
HOW TO USE THE ADMIN PANEL
================================================================================

ACCESSING ADMIN PANEL:
----------------------
1. Start your local server:
   - Double-click: start-server.bat
   - OR run: python -m http.server 8000

2. Open browser and go to:
   http://localhost:8000/admin/index.html

3. Login with your student portal credentials
   (You must be logged in to access admin panel)

UPLOADING FILES:
----------------
1. Click "File Manager" in sidebar
2. Click "Upload File" button
3. Fill in the form:
   
   File Name: Enter a descriptive name (without .pdf)
   Example: "Exam Timetable 2025"
   
   Description: Optional brief description
   Example: "Final examination schedule for all IT students"
   
   Category: Select from dropdown
   - Timetables: Class schedules, exam timetables
   - Forms: Application forms, request forms
   - Guides: Study guides, handbooks
   - Policies: College policies, rules
   - Other: Miscellaneous documents
   
   Year: Select who can see this file
   - Year 1: Only first year students
   - Year 2: Only second year students
   - Year 3: Only third year students
   - All Years: Everyone can see it
   
   Select PDF File: Click or drag & drop your PDF
   - Maximum size: 10MB
   - Only PDF files allowed

4. Click "Upload File"
5. Wait for success message
6. File is now live and accessible to students!

VIEWING FILES:
--------------
1. Click "File Manager" in sidebar
2. See all uploaded files with:
   - File name
   - Category
   - Year level
   - File size
   - Download count

DOWNLOADING FILES:
------------------
1. Click the download icon on any file
2. File opens in new tab or downloads

DELETING FILES:
---------------
1. Click the trash icon on any file
2. Confirm deletion
3. File is removed from storage and database
4. Students can no longer access it

VIEWING STUDENTS:
-----------------
1. Click "Students" in sidebar
2. See all registered students with:
   - Student ID
   - Name and Surname
   - Course (always IT)
   - Year level
   - Join date
3. Use search bar to filter students

================================================================================
HOW STUDENTS SEE FILES
================================================================================

AUTOMATIC YEAR FILTERING:
-------------------------
When a student logs in and goes to Resources page:

Year 1 Student sees:
- All files marked "Year 1"
- All files marked "All Years"
- Does NOT see Year 2 or Year 3 files

Year 2 Student sees:
- All files marked "Year 2"
- All files marked "All Years"
- Does NOT see Year 1 or Year 3 files

Year 3 Student sees:
- All files marked "Year 3"
- All files marked "All Years"
- Does NOT see Year 1 or Year 2 files

This happens AUTOMATICALLY - no configuration needed!

DOWNLOADING FILES:
------------------
1. Student clicks on any file
2. File downloads or opens in browser
3. Download is tracked in admin panel

================================================================================
FILE ORGANIZATION IN SUPABASE
================================================================================

Files are automatically organized in folders:

resources/
├── year-1/
│   ├── orientation-guide-1234567890.pdf
│   ├── course-outline-1234567891.pdf
│   └── ...
├── year-2/
│   ├── advanced-topics-1234567892.pdf
│   └── ...
├── year-3/
│   ├── project-guidelines-1234567893.pdf
│   └── ...
└── all-years/
    ├── exam-timetable-1234567894.pdf
    ├── student-handbook-1234567895.pdf
    └── ...

The system automatically:
- Creates the correct folder
- Adds timestamp to filename (prevents duplicates)
- Sanitizes filename (removes special characters)

================================================================================
FOR OTHER LECTURERS
================================================================================

SHARING ACCESS WITH COLLEAGUES:
-------------------------------
To allow another IT lecturer to upload files:

1. They need a student portal account
2. Give them the admin panel URL:
   http://localhost:8000/admin/index.html
   (Or your deployed URL)

3. They login with their credentials
4. They can now upload/delete files

NO TECHNICAL KNOWLEDGE NEEDED:
- No GitHub account required
- No command line knowledge required
- No file server access required
- Just login and upload!

TRAINING A NEW LECTURER:
------------------------
Show them:
1. How to access admin panel (URL + login)
2. How to upload a file (5 minute demo)
3. How to choose correct year and category
4. How to delete old files

That's it! They're ready to manage resources.

================================================================================
TROUBLESHOOTING
================================================================================

PROBLEM: "Failed to upload file"
SOLUTION:
- Check file is PDF format
- Check file size is under 10MB
- Check internet connection
- Check Supabase Storage bucket exists
- Check bucket is set to "Public"

PROBLEM: "Students can't see uploaded files"
SOLUTION:
- Check file year matches student's year
- Check file is marked as active
- Check student is logged in
- Check resources table has the file record

PROBLEM: "Can't access admin panel"
SOLUTION:
- Make sure you're logged into student portal first
- Check URL is correct
- Check local server is running
- Clear browser cache and try again

PROBLEM: "Upload button doesn't work"
SOLUTION:
- Check browser console for errors (F12)
- Check Supabase credentials are correct
- Check internet connection
- Try refreshing the page

PROBLEM: "Files show wrong year"
SOLUTION:
- Delete the file
- Re-upload with correct year selected
- Check student's year in database is correct

================================================================================
DATABASE STRUCTURE
================================================================================

RESOURCES TABLE:
----------------
id              - Unique identifier
title           - Display name of file
description     - Optional description
file_name       - Original filename
storage_path    - Path in Supabase Storage
file_url        - Public download URL
file_size       - Size in bytes
file_type       - MIME type (application/pdf)
category        - timetables, forms, guides, policies, other
course          - Always "Information Technology"
year            - 1, 2, 3, or "all"
uploaded_by     - User who uploaded (optional)
is_active       - true/false (for soft delete)
download_count  - Number of downloads
created_at      - Upload timestamp
updated_at      - Last modified timestamp

STUDENT_INFO TABLE:
-------------------
id              - Unique identifier
student_id      - Student ID number
name            - First name
surname         - Last name
course          - Always "Information Technology"
year            - 1, 2, or 3
certificate     - Certificate type
created_at      - Signup timestamp

================================================================================
SECURITY & PERMISSIONS
================================================================================

WHO CAN DO WHAT:

STUDENTS:
✅ View files for their year
✅ View files marked "All Years"
✅ Download files
❌ Cannot upload files
❌ Cannot delete files
❌ Cannot see other years' files

ADMIN (Logged in users):
✅ View all files
✅ Upload files
✅ Delete files
✅ View all students
✅ Search students
✅ See download statistics

PUBLIC (Not logged in):
❌ Cannot access admin panel
❌ Cannot access student portal
❌ Cannot view or download files

FILES IN STORAGE:
- Stored in public bucket (for easy downloads)
- Access controlled by database RLS policies
- Only authenticated users can see file listings
- Direct URLs work but are hard to guess

================================================================================
MAINTENANCE
================================================================================

REGULAR TASKS:
--------------
1. Upload new resources as needed
2. Delete outdated files
3. Check download statistics
4. Verify students are in correct years

SEMESTER START:
---------------
1. Upload new timetables
2. Upload new course outlines
3. Update exam schedules
4. Delete old semester files

SEMESTER END:
-------------
1. Archive old files (download locally)
2. Delete outdated resources
3. Prepare for next semester

YEARLY:
-------
1. Update year-specific content
2. Review and update policies
3. Clean up unused files
4. Check storage usage in Supabase

================================================================================
STORAGE LIMITS
================================================================================

SUPABASE FREE TIER:
- 1 GB storage
- Unlimited downloads
- Unlimited API requests

ESTIMATED CAPACITY:
- Average PDF: 1-2 MB
- Can store: 500-1000 PDFs
- More than enough for college needs

IF YOU NEED MORE:
- Upgrade to Supabase Pro ($25/month)
- Get 100 GB storage
- Or delete old files regularly

================================================================================
BACKUP & RECOVERY
================================================================================

BACKING UP FILES:
-----------------
1. Go to Supabase Storage > resources
2. Download important files locally
3. Store in safe location
4. Do this monthly or before major changes

RECOVERING DELETED FILES:
-------------------------
- Deleted files cannot be recovered from Supabase
- Keep local backups of important files
- Consider downloading files before deleting

EXPORTING DATABASE:
-------------------
1. Go to Supabase SQL Editor
2. Run: SELECT * FROM resources;
3. Export as CSV
4. Save for records

================================================================================
SUPPORT & CONTACT
================================================================================

FOR TECHNICAL ISSUES:
- Check this guide first
- Check Supabase documentation
- Check browser console (F12) for errors

FOR FEATURE REQUESTS:
- Contact: Uwami Mgxekwa
- GitHub: https://github.com/Uwami-Mgxekwa

FOR COLLEGE SUPPORT:
- Email: support@gautengcitycollege.edu.za
- Check FAQ page in student portal

================================================================================
CHANGELOG
================================================================================

Version 2.0 - February 2025
- Added Supabase Storage integration
- Removed manual file management
- Added year-specific filtering
- Added download tracking
- Added file descriptions
- Improved admin interface
- Added creator credits

Version 1.0 - January 2025
- Initial release
- Manual file management
- Basic admin panel
- Student portal

================================================================================
CREDITS
================================================================================

Developed by: Uwami Mgxekwa
GitHub: https://github.com/Uwami-Mgxekwa
Institution: Gauteng City College
Course: Information Technology
Year: 2025

Technologies Used:
- Supabase (Database & Storage)
- HTML5, CSS3, JavaScript
- Font Awesome Icons

================================================================================
END OF GUIDE
================================================================================

For the latest updates and documentation, visit:
https://github.com/Uwami-Mgxekwa

Thank you for using the GCC Student Portal!
